chrome.action.onClicked.addListener((e=>{chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]})})),chrome.runtime.onMessage.addListener(((e,r,t)=>{switch(e.type){case"fetchPageContent":console.log("Retrieving content for page: "+e.url),fetch(e.url).then((r=>{if(r.ok)return r.text();throw new Error("Network response was not ok for "+e.url)})).then((e=>{console.log(e),t({data:e})})).catch((e=>{console.error("Problem with retrieving the source url details:",e),t({data:null,error:e.message})}));break;case"getClaimsValidationReport":console.log("Getting claims validation report from text:\n"+e.commentText),fetch("https://veezbo--claim-validator-claim-validation.modal.run/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e.commentText,source:e.sourceText})}).then((e=>{if(!e.ok)throw new Error("Network response from LLM server was not ok");return e.json()})).then((e=>{if(!e.hasOwnProperty("report"))throw new Error("Claim validation report found in response from LLM server: "+e);t({data:e.report})})).catch((e=>{console.error("Issue with calling the LLM server",e),t({data:null,error:e.message})}))}return!0}));